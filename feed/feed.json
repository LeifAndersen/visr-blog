{
  "version": "https://jsonfeed.org/version/1.1",
  "title": "The VISr Blog",
  "language": "en",
  "home_page_url": "https://blog.visr.pl/",
  "feed_url": "https://example.com/feed/feed.json",
  "description": "All about Visual and Interactive Syntax",
  "author": {
    "name": "",
    "url": ""
  },
  "items": [{
      "id": "https://blog.visr.pl/posts/use-deps/",
      "url": "https://blog.visr.pl/posts/use-deps/",
      "title": "Using Dependencies in VISr",
      "content_html": "<link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\" />\n<link href=\"https://blog.visr.pl/css/index.css\" rel=\"stylesheet\" />\n<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script>\n<p>When creating and using visual and interactive syntax extensions with VISr, you\nhave access to the entire catalog of JavaScript (including WebAssembly and\nTypeScript) libraries found on <a href=\"https://www.npmjs.com/\">NPM</a>. This means your interactive-syntax\nextensions can use the wide range of existing code, from <a href=\"https://visjs.org/\">network layout</a>\nto <a href=\"https://ocjs.org/\">advanced cad libraries</a>.</p>\n<p>This post is a tutorial on how to add, and use, JavaScript dependencies to your\ncode. It shows you how to convert an <a href=\"https://www.npmjs.com/\">NPM</a> package for elIDE, the\npredominant VISr IDE. Additionally, this post points you to a directory of\npre-existing packages. By the end of this tutorial, you will have created a\nsmall extension that stores tree-literals in your code.</p>\n<p>If you are new to VISr or elIDE, I recommend you follow <a href=\"https://blog.visr.pl/posts/intro/index.html\">this introduction\ntutorial</a> first. It covers the basics of how to add interactive-syntax\nextensions to your code, as well as how to create a simple counter extension.\nYou can also <a href=\"https://www.youtube.com/watch?v=8htgAxJuK5c\">watch this video</a> to learn about the basics of visual\nand interactive syntax in general.</p>\n<!-- more -->\n<h2 id=\"the-basics\" tabindex=\"-1\">The Basics <a class=\"direct-link\" href=\"https://blog.visr.pl/posts/use-deps/#the-basics\" aria-hidden=\"true\">#</a></h2>\n<p>First thing first, you can find a list of the current set of available\ndependencies by going to <a href=\"http://deps.visr.pl/\">the VISr dependency page</a>:</p>\n<center><a href=\"http://deps.visr.pl/\" type=\"button\" class=\"btn btn-large btn-info\">\n  VISr Dependency Page\n</a></center>\n<p>These are all bundles from NPM that have been pre-packaged for elIDE. Later in\nthis tutorial we will cover how to package new bundles. For now though, we will\ninstall dependencies from this list.</p>\n<h3 id=\"adding-dependencies-to-elide\" tabindex=\"-1\">Adding Dependencies to elIDE <a class=\"direct-link\" href=\"https://blog.visr.pl/posts/use-deps/#adding-dependencies-to-elide\" aria-hidden=\"true\">#</a></h3>\n<p>The dependency manager can be found in the <code>Project</code> menu:</p>\n<img alt=\"Project Menu\" loading=\"lazy\" decoding=\"async\" src=\"https://blog.visr.pl/posts/use-deps/D_1JG4s9V--200.png\" width=\"200\" height=\"232\" />\n<p>When opened, you will be greeted with a window like this:</p>\n<img alt=\"Deps Dialog\" loading=\"lazy\" decoding=\"async\" src=\"https://blog.visr.pl/posts/use-deps/Bl7vub4Kmv-300.png\" width=\"600\" height=\"175\" srcset=\"https://blog.visr.pl/posts/use-deps/Bl7vub4Kmv-300.png 300w, https://blog.visr.pl/posts/use-deps/Bl7vub4Kmv-600.png 600w\" sizes=\"100vw\" />\n<p>This is a list of all of the dependencies in your current project. New\ndependencies can be added with the <code>+</code> button, and unneeded dependencies can be\nremoved with the <code>-</code> button.</p>\n<p>The <code>Name</code> field is what you will require in your code, while the <code>URL</code> field\ninstructs elIDE where to fetch the dependency from. If no URL is provided, then\na URL is referred from the dependency list at <a href=\"http://deps.visr.pl/\">https://deps.visr.pl</a>.</p>\n<p>The <code>Load?</code> option tells elIDE if it should load the dependency when running the\nprogram. Generally this option should be left on. The only time to turn it off\nis when adding packages that contain only data and no executable code. At the\ntime of writing this, only one package fits this description:\n<code>opencascade.wasm</code>.</p>\n<p>For this tutorial we will need two packages: <code>react-graph-vis</code> and\n<code>vis-network-css</code>. Once you hav added those packages press <code>Update</code>, and elIDE\nwill download those packages into your project.</p>\n<h3 id=\"using-in-code\" tabindex=\"-1\">Using in Code <a class=\"direct-link\" href=\"https://blog.visr.pl/posts/use-deps/#using-in-code\" aria-hidden=\"true\">#</a></h3>\n<p>With these dependencies added, you can now refer to them as you would <a href=\"http://cljs.github.io/api/cljs.core/#ns\">any\nClojureScript module</a>:</p>\n<pre class=\"language-clojurescript\"><code class=\"language-clojurescript\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">ns</span> tree.core<br />  <span class=\"token punctuation\">(</span><span class=\"token symbol\">:require</span> <span class=\"token punctuation\">[</span>react-graph-vis<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<p>This means you also have full access to the <code>:as</code> and <code>:refer</code> keywords as well.\nDo note, however, that many JavaScript modules provide a <code>default</code> export. Unfortunately, those can't be accessed directly through this mechanism. Rather, you can simply access it as a field from your required module:</p>\n<pre class=\"language-clojurescript\"><code class=\"language-clojurescript\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">def</span> Graph <span class=\"token punctuation\">(</span><span class=\"token function\">.-default</span> react-graph-vis<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Here, <code>Graph</code> comes from the <a href=\"https://visjs.github.io/vis-network/docs/network/\">Vis.js Network Library</a>. We can now\nconstruct our VISr as normal:</p>\n<pre class=\"language-clojurescript\"><code class=\"language-clojurescript\"><span class=\"token comment\">;; A Node is one of:</span><br /><span class=\"token comment\">;;   - {:left Node :right Node :label String}</span><br /><span class=\"token comment\">;;   - {:label String}</span><br /><br /><span class=\"token comment\">;; A Tree is: {:root Node}</span><br /><br /><span class=\"token punctuation\">(</span><span class=\"token function\">defvisr</span> Tree<br />  <span class=\"token punctuation\">(</span><span class=\"token function\">state</span> root <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br />  <span class=\"token punctuation\">(</span><span class=\"token function\">elaborate-fn</span> <span class=\"token punctuation\">[</span>this<span class=\"token punctuation\">]</span><br />    root<span class=\"token punctuation\">)</span><br />  <span class=\"token punctuation\">(</span><span class=\"token function\">render</span> <span class=\"token punctuation\">[</span>this<span class=\"token punctuation\">]</span><br />   <span class=\"token punctuation\">[</span><span class=\"token symbol\">:></span> Graph<br />    <span class=\"token punctuation\">{</span><span class=\"token symbol\">:options</span> <span class=\"token punctuation\">{</span><span class=\"token symbol\">:layout</span> <span class=\"token punctuation\">{</span><span class=\"token symbol\">:hierarchical</span> <span class=\"token punctuation\">{</span><span class=\"token symbol\">:sortMethod</span> <span class=\"token string\">\"directed\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><br />     <span class=\"token symbol\">:graph</span> <span class=\"token punctuation\">(</span><span class=\"token function\">convert-tree</span> <span class=\"token operator\">@</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<p>For this tutorial, the elaborator is nothing special, it just returns the tree\nas a run-time data structure. The renderer is a little more complicated, but\noffloads most of the work to a <code>convert-tree</code> helper:</p>\n<pre class=\"language-clojurescript\"><code class=\"language-clojurescript\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> convert-tree <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>label <span class=\"token symbol\">:label</span><br />                     <span class=\"token punctuation\">{</span>l-label <span class=\"token symbol\">:label</span> <span class=\"token symbol\">:as</span> left<span class=\"token punctuation\">}</span> <span class=\"token symbol\">:left</span><br />                     <span class=\"token punctuation\">{</span>r-label <span class=\"token symbol\">:label</span> <span class=\"token symbol\">:as</span> right<span class=\"token punctuation\">}</span> <span class=\"token symbol\">:right</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><br />  <span class=\"token punctuation\">(</span><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">and</span> left right<span class=\"token punctuation\">)</span><br />    <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>l-nodes <span class=\"token symbol\">:nodes</span> l-edges <span class=\"token symbol\">:edges</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">(</span><span class=\"token function\">convert-tree</span> left<span class=\"token punctuation\">)</span><br />          <span class=\"token punctuation\">{</span>r-nodes <span class=\"token symbol\">:nodes</span> r-edges <span class=\"token symbol\">:edges</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">(</span><span class=\"token function\">convert-tree</span> right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><br />      <span class=\"token punctuation\">{</span><span class=\"token symbol\">:nodes</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">concat</span> l-nodes r-nodes <span class=\"token operator\">#</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token symbol\">:id</span> label <span class=\"token symbol\">:label</span> label<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br />       <span class=\"token symbol\">:edges</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">concat</span> l-edges r-edges <span class=\"token operator\">#</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token symbol\">:from</span> label <span class=\"token symbol\">:to</span> l-label<span class=\"token punctuation\">}</span><br />                                        <span class=\"token punctuation\">{</span><span class=\"token symbol\">:from</span> label <span class=\"token symbol\">:to</span> r-label<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br />    <span class=\"token punctuation\">{</span><span class=\"token symbol\">:nodes</span> <span class=\"token operator\">#</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token symbol\">:id</span> label <span class=\"token symbol\">:label</span> label<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<p>This helper can be used to draw the tree at both during edit time, and run time.\nFor example, here is a tree with a root node <code>A</code>, and two leaf nodes <code>x</code>, and <code>y</code>:</p>\n<img alt=\"A tree created with interactive syntax\" loading=\"lazy\" decoding=\"async\" src=\"https://blog.visr.pl/posts/use-deps/7T9w_wrI6j-300.png\" width=\"300\" height=\"149\" />\n<p>The astute reader may have noticed that while this project uses\n<code>vis-network-css</code>, its not actually used in the code. Instead, it is used by\n<code>react-graph-vis</code> as a peer dependency. Removing it from the dependency list\ncauses the tree to render improperly.</p>\n<h2 id=\"packaging-new-dependencies\" tabindex=\"-1\">Packaging New Dependencies <a class=\"direct-link\" href=\"https://blog.visr.pl/posts/use-deps/#packaging-new-dependencies\" aria-hidden=\"true\">#</a></h2>\n<p>Using pre-packaged dependencies is useful, but the entire catalog of existing,\nand future, JavaScript libraries is much bigger. Thus it is useful to know how\nto bundle nwe packages for elIDE. If you do create a package, feel free to\nsubmit a <a href=\"https://github.com/LeifAndersen/interactive-syntax-clojure/tree/main/scripts/shop\">pull request</a> to add it the official dependency repository.</p>\n<p>As of right now, you can not create new elIDE packages from within elIDE.<sup class=\"footnote-ref\"><a href=\"https://blog.visr.pl/posts/use-deps/#fn1\" id=\"fnref1\">[1]</a></sup>\nYou will need to install three packages:</p>\n<ol>\n<li><a href=\"https://racket-lang.org/\">Racket</a></li>\n<li><a href=\"https://nodejs.org/en/\">nodejs</a></li>\n<li><a href=\"https://www.npmjs.com/\">npm</a></li>\n</ol>\n<p>You can download them seperately, or you can get them through your package\nmanger, such as <a href=\"https://brew.sh/\">Homebrew</a> for Linux or macOS:</p>\n<pre class=\"language-sh\"><code class=\"language-sh\">$ brew <span class=\"token function\">install</span> <span class=\"token function\">node</span><br />$ brew <span class=\"token function\">install</span> <span class=\"token function\">npm</span><br />$ brew <span class=\"token function\">install</span> racket</code></pre>\n<p>You will also need the <code>sml</code> package from the Racket repository:</p>\n<pre class=\"language-sh\"><code class=\"language-sh\">$ raco pkg <span class=\"token function\">install</span> sml</code></pre>\n<p>Finally, you will need the <code>scripts/shop</code> folder from the [VISr][visr-source]\nrepository:</p>\n<pre class=\"language-sh\"><code class=\"language-sh\">$ <span class=\"token function\">git</span> clone https://github.com/LeifAndersen/interactive-syntax-clojure<br />$ <span class=\"token builtin class-name\">cd</span> interactive-syntax-clojure/scripts/shop</code></pre>\n<p>In this folder, you'll notice two important files, <code>database.sml</code> and\n<code>build.rkt</code>. The former contains the requiremets to build each package, while\nthe latter contains the build script itself. Enteries in <code>database.sml</code> consist\nof the package name, a corrosponding NPM package, and a javascript path within\nthat package. For example, the entry for <code>react-graph-vis</code> is:</p>\n<pre class=\"language-sh\"><code class=\"language-sh\">$ <span class=\"token function\">cat</span> database.sml<br /><span class=\"token punctuation\">[</span><span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">]</span><br />react-graph-vis:<br /><span class=\"token punctuation\">{</span>package: <span class=\"token string\">\"react-graph-vis\"</span> path: <span class=\"token string\">\"lib/index.js\"</span><span class=\"token punctuation\">}</span><br /><span class=\"token punctuation\">[</span><span class=\"token punctuation\">..</span>.<span class=\"token punctuation\">]</span></code></pre>\n<p>You won't need to modify the contents of <code>build.rkt</code>, but you will need to add\nyour package to <code>database.sml</code>. Once you have added the entry into the database, you can now build the dependency with <code>build.rkt</code>:</p>\n<pre class=\"language-sh\"><code class=\"language-sh\">$ racket build.rkt <span class=\"token parameter variable\">-v</span> react-graph-vis</code></pre>\n<p>Once built, you will find the dependency in the newly created <code>deps</code> folder.</p>\n<pre class=\"language-sh\"><code class=\"language-sh\">$ <span class=\"token function\">ls</span> deps/<br />react-graph-vis.js<br />react-graph-vis.js.LICENSE.txt</code></pre>\n<p>The first file is the dependency itself, while the second file contains all of\nthe licenses of the libraries used to create that dependency.</p>\n<h2 id=\"wrapping-up\" tabindex=\"-1\">Wrapping Up <a class=\"direct-link\" href=\"https://blog.visr.pl/posts/use-deps/#wrapping-up\" aria-hidden=\"true\">#</a></h2>\n<p>And that's it. Now you know how to add dependencies to your projects, how to use\nthose dependencies when creating interactive-syntax extensions, and how to\npackage new JavaScript libraries into dependencies.</p>\n<p>Of course, this entire ecosystem is still under active development. We are\nalways interested in conributors, from simple additions to the dependency\ndirectory, to a complete rework of the how dependencies are built. At the end of\nthe day, what counts is all of the cool things we can build using visual and\ninteractive-syntax extensions.</p>\n<hr class=\"footnotes-sep\" />\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p>This is not by design. I simply haven't figured out how to run Webpack,\nthe crutial component, from within a web browser. If you know how to do\nthis, please get in contact with me! <a href=\"https://blog.visr.pl/posts/use-deps/#fnref1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n</ol>\n</section>\n",
      "date_published": "2022-10-20T00:00:00Z"
    },{
      "id": "https://blog.visr.pl/posts/intro/",
      "url": "https://blog.visr.pl/posts/intro/",
      "title": "Introducing Visual and Interactive-Syntax realized (VISr) for ClojureScript (and JavaScript)",
      "content_html": "<p>Visual and interactive-syntax is a type of language-oriented programming that\nallows developers to use, view, and edit portions of a textual program with\ngraphics. Using interactive-syntax provides the benefits of a graphical\nprogramming language, while keeping all of the benefits of a purely textual\nlanguage. For example, the following is an example of a small network embedded\nin a program:</p>\n<img alt=\"Graphical network embedded in text\" loading=\"lazy\" decoding=\"async\" src=\"https://blog.visr.pl/posts/intro/dRGrWU2Nnk-300.png\" width=\"600\" height=\"337\" srcset=\"https://blog.visr.pl/posts/intro/dRGrWU2Nnk-300.png 300w, https://blog.visr.pl/posts/intro/dRGrWU2Nnk-600.png 600w\" sizes=\"100vw\" />\n<p>Interactive-syntax is backed by human readable code; the visual components\nexists purely when writing and editing code. This backing means all of the tools\ninvolved in software development work with interactive-syntax extensions. For\nexample:</p>\n<ul>\n<li>version control, such as git, works with interactive-syntax;</li>\n<li>programs using interactive-syntax can be written and edited with your favorite\ntext editor or IDE;</li>\n<li>cut/copy/paste works with interactive-syntax using your operating system's\nnative clipboard;</li>\n<li>code analysis tools, like diff and refactor, still work with\ninteractive-syntax; and</li>\n<li>you can use interactive-syntax in any language or environment that supports\nlanguage-oriented programming.</li>\n</ul>\n<p>To learn more about interactive-syntax, watch <a href=\"https://www.youtube.com/watch?v=8htgAxJuK5c\">this video</a> or read\n<a href=\"https://dl.acm.org/doi/10.1145/3428290\">the accompanying paper</a>.</p>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/8htgAxJuK5c\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\"></iframe>\n<p><a href=\"https://visr.pl/\">VISr (Visual and Interactive-Syntax realized) for ClojureScript</a> is a\npractical implementation of interactive-syntax in web browsers. The VISr\nenvironment is a full-featured IDE that supports interactive-syntax components\ncalled VISrs. Additionally, the VISr environment comes with a package manager\nthat supports <a href=\"https://www.npmjs.com/\">NPM packages</a>.</p>\n<p>This article is a brief introduction to both the VISr environment and the\ncomponents that make up a VISrs. It discusses how to insert a VISr into code,\nhow to manipulate a VISr, and how to create a new types of VISr. Future articles\nwill discuss more advanced uses such as integrating NPM packages and using VISrs\nin other languages.</p>\n<!-- more -->\n<h2 id=\"getting-started-with-visr\" tabindex=\"-1\">Getting started with VISr <a class=\"direct-link\" href=\"https://blog.visr.pl/posts/intro/#getting-started-with-visr\" aria-hidden=\"true\">#</a></h2>\n<p>Start by going to <a href=\"https://visr.pl/\">visr.pl</a>, which is a web-based IDE that directly\nsupports VISrs. Once in the IDE, press <code>Insert VISr</code> to place a VISr at the\ncurrent cursor position. This VISr contains two buttons:</p>\n<ul>\n<li>clicking the first displays the VISr's visual representation, and</li>\n<li>clicking the second shows its textual representation.</li>\n</ul>\n<img alt=\"VISr\" loading=\"lazy\" decoding=\"async\" src=\"https://blog.visr.pl/posts/intro/29GkAMLS2A-48.png\" width=\"48\" height=\"29\" />\n<p>Opening the code shows that the new VISr is an instance of\n<code>visr.core/empty-visr</code>, a default VISr provided by the IDE. This VISr expects a\nmap with the key <code>:message</code> to display in the visual view. Changing the value\nassociated with <code>:message</code> changes what is displayed, in this case &quot;Endless\nPossibility&quot;:</p>\n<img alt=\"Open VISr\" loading=\"lazy\" decoding=\"async\" src=\"https://blog.visr.pl/posts/intro/4FuFkW5abk-300.png\" width=\"300\" height=\"43\" />\n<p>Remember that, although this VISr is displayed graphically, it still exists as\nhuman-readable text. One way to see this text is by copying and pasting the\nVISr. A copy of the same VISr will appear when it is placed back into the IDE.\nHowever, pasting it into other text editors that do not natively support VISrs\nyields the following human readable, and editable, text:</p>\n<pre class=\"language-clojurescript\"><code class=\"language-clojurescript\"><span class=\"token operator\">^</span><span class=\"token punctuation\">{</span><span class=\"token symbol\">:editor</span> visr.core/empty-visr<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token function\">visr.core/empty-visr+elaborate</span><br />                                 <span class=\"token punctuation\">{</span><span class=\"token symbol\">:message</span> <span class=\"token string\">\"Endless Possibility\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<p>This operation works in reverse too. Writing out similar text and pasting it\ninto <a href=\"https://visr.pl/\">visr.pl</a> yields its visual representation.</p>\n<h2 id=\"making-a-new-visr\" tabindex=\"-1\">Making a new VISr <a class=\"direct-link\" href=\"https://blog.visr.pl/posts/intro/#making-a-new-visr\" aria-hidden=\"true\">#</a></h2>\n<p>The <code>defvisr</code> form creates a VISr type. This form expects two methods:</p>\n<ol>\n<li>a <code>render</code> method that provides visualization and interaction when code is\nedited, and</li>\n<li>an <code>elaborate</code>/<code>elaborate-fn</code> method that gives the VISr compile-time and\nrun-time semantics.</li>\n</ol>\n<p>The following is the signature for a simple VISr type:</p>\n<pre class=\"language-clojurescript\"><code class=\"language-clojurescript\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">ns</span> example.core<span class=\"token punctuation\">)</span><br /><br /><span class=\"token punctuation\">(</span><span class=\"token function\">defvisr</span> Counter<br />  <span class=\"token punctuation\">(</span><span class=\"token function\">elaborate-fn</span> <span class=\"token punctuation\">[</span>this<span class=\"token punctuation\">]</span> <span class=\"token string\">\"TODO-elaborate\"</span><span class=\"token punctuation\">)</span><br />  <span class=\"token punctuation\">(</span><span class=\"token function\">render</span> <span class=\"token punctuation\">[</span>this<span class=\"token punctuation\">]</span> <span class=\"token string\">\"TODO-render\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<p>This example uses <code>elaborate-fn</code>, a simplified version of <code>elaborate</code> that gives\nthe <code>VISr</code> the same semantics as a function application. It also allows the\n<code>defvisr</code> form to work in the same file as the VISr itself.</p>\n<img alt=\"Example of elaborate-fn semantics\" loading=\"lazy\" decoding=\"async\" src=\"https://blog.visr.pl/posts/intro/Cpim81h-RI-300.png\" width=\"600\" height=\"337\" srcset=\"https://blog.visr.pl/posts/intro/Cpim81h-RI-300.png 300w, https://blog.visr.pl/posts/intro/Cpim81h-RI-600.png 600w\" sizes=\"100vw\" />\n<h2 id=\"the-render-method-for-edit-time-semantics\" tabindex=\"-1\">The Render Method for Edit-Time Semantics <a class=\"direct-link\" href=\"https://blog.visr.pl/posts/intro/#the-render-method-for-edit-time-semantics\" aria-hidden=\"true\">#</a></h2>\n<p>The <code>render</code> method is given the VISr state <a href=\"https://clojure.org/reference/atoms\">as an atom</a>; updating this\natom also updates the code to reflect the new state. The return value for\n<code>render</code> must be a <a href=\"https://reagent-project.github.io/\">Reagent form</a> that is the visual view for the VISr.\nA render method for a counter VISr might look as follows:</p>\n<pre class=\"language-clojurescript\"><code class=\"language-clojurescript\"><span class=\"token punctuation\">(</span><span class=\"token function\">render</span> <span class=\"token punctuation\">[</span>this<span class=\"token punctuation\">]</span><br />  <span class=\"token punctuation\">[</span><span class=\"token symbol\">:button</span> <span class=\"token punctuation\">{</span><span class=\"token symbol\">:on-click</span> <span class=\"token operator\">#</span><span class=\"token punctuation\">(</span><span class=\"token function\">swap!</span> this inc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">@</span>this<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<p>And in action:</p>\n<img alt=\"Simple Count Example\" loading=\"lazy\" decoding=\"async\" src=\"https://blog.visr.pl/posts/intro/gEM9kSBBOJ-300.png\" width=\"600\" height=\"337\" srcset=\"https://blog.visr.pl/posts/intro/gEM9kSBBOJ-300.png 300w, https://blog.visr.pl/posts/intro/gEM9kSBBOJ-600.png 600w\" sizes=\"100vw\" />\n<p>This VISr doesn't match the theme of the page; it also requires the state to be\na single number. Using <a href=\"https://react-bootstrap.github.io/\">React Bootstrap</a> and Reagent cursors\nfixes both of these issues:</p>\n<pre class=\"language-clojurescript\"><code class=\"language-clojurescript\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">ns</span> example.core<br />  <span class=\"token punctuation\">(</span><span class=\"token symbol\">:require</span> <span class=\"token punctuation\">[</span>reagent.core <span class=\"token symbol\">:refer</span> <span class=\"token punctuation\">[</span>cursor<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><br />            <span class=\"token punctuation\">[</span>react-bootstrap <span class=\"token symbol\">:refer</span> <span class=\"token punctuation\">[</span>Button<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br /><br /><span class=\"token punctuation\">(</span><span class=\"token function\">defvisr</span> Counter<br />  <span class=\"token punctuation\">(</span><span class=\"token function\">elaborate-fn</span> <span class=\"token punctuation\">[</span>this<span class=\"token punctuation\">]</span> <span class=\"token string\">\"TODO-elaborate\"</span><span class=\"token punctuation\">)</span><br />  <span class=\"token punctuation\">(</span><span class=\"token function\">render</span> <span class=\"token punctuation\">[</span>this<span class=\"token punctuation\">]</span><br />    <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span>count <span class=\"token punctuation\">(</span><span class=\"token function\">cursor</span> this <span class=\"token punctuation\">[</span><span class=\"token symbol\">:count</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><br />      <span class=\"token punctuation\">(</span><span class=\"token keyword\">when-not</span> <span class=\"token operator\">@</span>count <span class=\"token punctuation\">(</span><span class=\"token function\">reset!</span> count <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br />      <span class=\"token punctuation\">[</span><span class=\"token symbol\">:></span> Button <span class=\"token punctuation\">{</span><span class=\"token symbol\">:on-click</span> <span class=\"token operator\">#</span><span class=\"token punctuation\">(</span><span class=\"token function\">swap!</span> count inc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">@</span>count<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"elaboration-and-run-time-semantics\" tabindex=\"-1\">Elaboration and Run-Time Semantics <a class=\"direct-link\" href=\"https://blog.visr.pl/posts/intro/#elaboration-and-run-time-semantics\" aria-hidden=\"true\">#</a></h2>\n<p>The elaborate method takes the VISr state, and is expected to provide a\ncompile-time or run-time semantics. In the simplified case of <code>elaborate-fn</code>,\nthe VISr semantics takes the form of a function application:</p>\n<pre class=\"language-clojurescript\"><code class=\"language-clojurescript\"><span class=\"token punctuation\">(</span><span class=\"token function\">elaborate-fn</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token symbol\">:keys</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span> count<span class=\"token punctuation\">)</span></code></pre>\n<p>This <code>elaborate</code> method expects a dictionary with the key <code>:count</code> and returns\nthe value associated with that key. It makes use of <a href=\"https://clojure.org/guides/destructuring\">ClojureScript's\nDestructuring</a> for brevity. The following code is equivalent:</p>\n<pre class=\"language-clojurescript\"><code class=\"language-clojurescript\"><span class=\"token punctuation\">(</span><span class=\"token function\">elaborate-fn</span> <span class=\"token punctuation\">[</span>this<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">get</span> this <span class=\"token symbol\">:count</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"putting-it-all-together\" tabindex=\"-1\">Putting it all together <a class=\"direct-link\" href=\"https://blog.visr.pl/posts/intro/#putting-it-all-together\" aria-hidden=\"true\">#</a></h2>\n<p>The final result is:</p>\n<pre class=\"language-clojurescript\"><code class=\"language-clojurescript\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">ns</span> test.core<br />  <span class=\"token punctuation\">(</span><span class=\"token symbol\">:require</span> <span class=\"token punctuation\">[</span>reagent.core <span class=\"token symbol\">:refer</span> <span class=\"token punctuation\">[</span>cursor<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><br />            <span class=\"token punctuation\">[</span>react-bootstrap <span class=\"token symbol\">:refer</span> <span class=\"token punctuation\">[</span>Button<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br /><br /><span class=\"token punctuation\">(</span><span class=\"token function\">defvisr</span> Counter<br />  <span class=\"token punctuation\">(</span><span class=\"token function\">elaborate-fn</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token symbol\">:keys</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span> count<span class=\"token punctuation\">)</span><br />  <span class=\"token punctuation\">(</span><span class=\"token function\">render</span> <span class=\"token punctuation\">[</span>this<span class=\"token punctuation\">]</span><br />    <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span>count <span class=\"token punctuation\">(</span><span class=\"token function\">cursor</span> this <span class=\"token punctuation\">[</span><span class=\"token symbol\">:count</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><br />      <span class=\"token punctuation\">(</span><span class=\"token keyword\">when-not</span> <span class=\"token operator\">@</span>count <span class=\"token punctuation\">(</span><span class=\"token function\">reset!</span> count <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br />      <span class=\"token punctuation\">[</span><span class=\"token symbol\">:></span> Button <span class=\"token punctuation\">{</span><span class=\"token symbol\">:on-click</span> <span class=\"token operator\">#</span><span class=\"token punctuation\">(</span><span class=\"token function\">swap!</span> count inc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">@</span>count<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Here is the VISr in action:</p>\n<img alt=\"Full Count Example\" loading=\"lazy\" decoding=\"async\" src=\"https://blog.visr.pl/posts/intro/H3V63THsXG-300.png\" width=\"600\" height=\"337\" srcset=\"https://blog.visr.pl/posts/intro/H3V63THsXG-300.png 300w, https://blog.visr.pl/posts/intro/H3V63THsXG-600.png 600w\" sizes=\"100vw\" />\n<p>That's all there is to it. From here, you can go to <a href=\"https://visr.pl/\">visr.pl</a> to make your\nown programs using VISr. You can also <a href=\"https://study.visr.pl/\">take this survey</a>, which contains\nmore advanced example uses for VISr. If you find any bugs or want to contribute,\nyou can also head to <a href=\"https://github.com/LeifAndersen/interactive-syntax-clojure\">the visr project page</a>.</p>\n<p>Thanks for reading, happy coding!</p>\n",
      "date_published": "2022-01-06T00:00:00Z"
    }
  ]
}
